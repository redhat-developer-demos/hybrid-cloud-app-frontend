{"version":3,"sources":["components/MessageRequest.js","components/ResponsesTable.js","components/MessageResponse.js","components/CloudMessagesChart.js","components/MessageWorkers.js","App.js","index.js"],"names":["MessageRequest","useState","text","setText","uppercase","setUppercase","reverse","setReverse","handleSubmit","event","preventDefault","data","axios","post","process","then","response","status","catch","error","console","log","Fragment","className","Form","isHorizontal","onSubmit","FormGroup","label","isRequired","TextInput","type","id","name","autoFocus","onChange","value","maxLength","Checkbox","isChecked","ActionGroup","Button","variant","onClick","isDisabled","length","RenderPagination","totalCount","page","perPage","handleSetPage","handlePerPageSelect","Pagination","isCompact","itemCount","defaultToFullPage","onSetPage","onPerPageSelect","perPageOptions","title","ResponsesTable","rows","setPerPage","pageRows","setPageRows","setPage","useEffect","slice","currentRows","map","row","cells","_evt","newPerPage","newPage","startIdx","endIdx","__evt","Table","aria-label","styles","modifiers","nowrap","EmptyState","EmptyStateIcon","icon","FlagsIcon","Title","headingLevel","size","EmptyStateBody","MessageResponse","responses","setResponses","interval","setInterval","get","clearInterval","rowData","forEach","object","cloud","push","buildRows","CloudMessagesChart","workerData","style","height","width","ChartDonut","ariaDesc","ariaTitle","constrainToVisibleArea","labels","datum","x","y","legendData","legendOrientation","legendPosition","padding","bottom","left","right","top","subTitle","themeColor","ChartThemeColor","multiOrdered","MessageWorkers","workers","setWorkers","rp","chartData","App","TitleSizes","Divider","Flex","spaceItems","modifier","FlexItem","flex","default","isVertical","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7bded7a6.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport {\n  Form,\n  FormGroup,\n  TextInput,\n  Checkbox,\n  ActionGroup,\n  Button\n} from '@patternfly/react-core';\nimport axios from 'axios';\n\nconst MessageRequest = () => {\n  const [text, setText] = useState(\"\")\n  const [uppercase, setUppercase] = useState(false)\n  const [reverse, setReverse] = useState(false)\n\n  const clearState = () => {\n    setText(\"\");\n    setUppercase(false);\n    setReverse(false);\n  }\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    //TODO prevet SQL  Injection, JS Injection \n    var data = { text, uppercase, reverse }\n    //console.log(\"Sending Request \" + JSON.stringify(data));\n    setText(\"\");\n    axios.post(process.env.REACT_APP_API_URL, data)\n      .then(function (response) {\n        if (response.status === 202) {\n          //console.log(\"Message sent!\");\n        }\n      })\n      .catch(function (error) {\n        console.log(\"Error sending message\", error);\n      });\n  }\n\n  return (\n    <React.Fragment>\n      <h2 className=\"pf-c-title pf-m-lg\">&nbsp;</h2>\n      <Form isHorizontal onSubmit={handleSubmit}>\n        <FormGroup label=\"Enter a message:\" isRequired>\n          <TextInput type=\"text\"\n            isRequired\n            id=\"text\"\n            name=\"text\"\n            autoFocus\n            onChange={setText}\n            value={text}\n            maxLength=\"30\" />\n        </FormGroup>\n\n        <FormGroup label=\"Response formatting:\">\n          <Checkbox id=\"request-uppercase\"\n            label=\"Uppercase\"\n            type=\"checkbox\"\n            name=\"uppercase\"\n            onChange={setUppercase}\n            isChecked={uppercase} />\n          <Checkbox id=\"request-reverse\"\n            label=\"Reverse\"\n            type=\"checkbox\"\n            name=\"reverse\"\n            onChange={setReverse}\n            isChecked={reverse} />\n        </FormGroup>\n        <ActionGroup className=\"pf-u-float-right\">\n          <Button variant=\"primary\"\n            onClick={handleSubmit}\n            isDisabled={text.length === 0}>Send Request</Button>\n          <Button variant=\"link\" onClick={clearState}>Cancel</Button>\n        </ActionGroup>\n      </Form>\n    </React.Fragment>\n  );\n}\n\nexport default MessageRequest;","import React, { useState, useEffect } from \"react\";\nimport {\n  Table,\n  TableHeader,\n  TableBody,\n} from '@patternfly/react-table';\nimport { EmptyState, EmptyStateBody, Title, EmptyStateIcon, Pagination } from '@patternfly/react-core';\nimport FlagsIcon from '@patternfly/react-icons/dist/js/icons/messages-icon';\nimport styles from '@patternfly/react-styles/css/components/Table/table';\n\nconst RenderPagination = ({\n  totalCount,\n  page,\n  perPage,\n  handleSetPage,\n  handlePerPageSelect }) => {\n  return (<Pagination\n    isCompact\n    itemCount={totalCount}\n    page={page}\n    perPage={perPage}\n    defaultToFullPage\n    onSetPage={handleSetPage}\n    onPerPageSelect={handlePerPageSelect}\n    perPageOptions={[\n      { title: \"3\", value: 3 },\n      { title: \"5\", value: 5 },\n      { title: \"10\", value: 10 },\n      { title: \"15\", value: 15 },\n      { title: '20', value: 20 }\n    ]}\n  />);\n}\nconst ResponsesTable = ({ rows }) => {\n  const defaultPerPage = 3;\n  const columns = ['Response', 'Cloud'];\n  const [perPage, setPerPage] = useState(defaultPerPage)\n  const [pageRows, setPageRows] = useState([])\n  const [page, setPage] = useState(1)\n\n  const handlePerPageSelect = (_evt, newPerPage, newPage, startIdx, endIdx) => {\n    //console.log(\"handlePerPageSelect\", rows)\n    setPerPage(newPerPage);\n    setPage(newPage);\n    setPageRows(rows.slice(startIdx, endIdx));\n  };\n\n  const handleSetPage = (__evt, newPage, perPage, startIdx, endIdx) => {\n    //console.log(\"handleSetPage\", rows)\n    setPage(newPage);\n    setPageRows(rows.slice(startIdx, endIdx));\n  };\n\n  useEffect(() => {\n    setPageRows(rows.length > defaultPerPage ? rows.slice(0, defaultPerPage) : rows)\n  }, [rows, defaultPerPage, setPageRows]);\n\n  const currentRows = pageRows.map((row) => ({ cells: row.cells }));\n\n  return (\n    <React.Fragment>\n      <RenderPagination\n        totalCount={rows.length}\n        page={page}\n        perPage={perPage}\n        handlePerPageSelect={handlePerPageSelect}\n        handleSetPage={handleSetPage}\n      />\n      <Table aria-label=\"Responses\" cells={columns} rows={currentRows}>\n        <TableHeader className={styles.modifiers.nowrap} />\n        <TableBody />\n      </Table>\n      {rows.length <= 0 &&\n        <EmptyState>\n          <EmptyStateIcon icon={FlagsIcon} />\n          <Title headingLevel=\"h2\" size=\"lg\">\n            No messages.\n        </Title>\n          <EmptyStateBody>\n            No messages yet, use \"Send Request\" above to send one.\n        </EmptyStateBody>\n        </EmptyState>\n      }\n    </React.Fragment>\n  );\n}\n\nexport default ResponsesTable;","import React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\n\nimport ResponsesTable from './ResponsesTable';\n\nconst MessageResponse = () => {\n\n  const [responses, setResponses] = useState([]);\n\n  const buildRows = () => {\n    //console.log(\"Responses:\", JSON.stringify(responses))\n    if (responses && responses.length > 0) {\n      const rowData = [];\n      responses.forEach(object => {\n        const row = [];\n        const cloud = object['cloud'];\n        const response = object['response'];\n        //console.log(`${cloud}: ${response}`);\n        row.push(response);\n        row.push(cloud);\n        rowData.push({ cells: row })\n      });\n      //console.log(\"Table Rows\", JSON.stringify(rowData))\n      return rowData;\n    }\n    return [];\n\n  }\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      axios.get(process.env.REACT_APP_API_RESPONSES_URL)\n        .then(function (response) {\n          if (response.status === 200) {\n            if (response.data) {\n              setResponses(response.data);\n            } else {\n              console.log(\"No responses data data in response\");\n            }\n          }\n        })\n        .catch(function (error) {\n          console.log(\"Error getting responses data\", error);\n        });\n    }, 1000);\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n\n\n  return (\n    <ResponsesTable rows={buildRows()} />\n  );\n}\n\nexport default MessageResponse;","import React from 'react';\nimport { ChartDonut, ChartThemeColor } from '@patternfly/react-charts';\n\nconst CloudMessagesChart = ({ workerData }) => {\n  return (\n    <div style={{ height: '230px', width: '350px' }}>\n      <ChartDonut\n        ariaDesc=\"Processed Messages\"\n        ariaTitle=\"Responses\"\n        constrainToVisibleArea={true}\n        data={workerData.data}\n        labels={({ datum }) => `${datum.x}: ${datum.y}%`}\n        legendData={workerData.legendData}\n        legendOrientation=\"vertical\"\n        legendPosition=\"right\"\n        padding={{\n          bottom: 20,\n          left: 20,\n          right: 140, // Adjusted to accommodate legend\n          top: 20\n        }}\n        subTitle=\"Processed Messages\"\n        title={workerData.title}\n        themeColor={ChartThemeColor.multiOrdered}\n        width={350}\n      />\n    </div>\n  );\n};\n\nexport default CloudMessagesChart;","import React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\n\nimport CloudMessagesChart from './CloudMessagesChart'\n\nconst MessageWorkers = () => {\n  const [workers, setWorkers] = useState([]);\n\n  const chartData = () => {\n    //console.log(\"Workers\", JSON.stringify(workers))\n    const data = [];\n    const legendData = [];\n    let title = 0;\n    if (workers && workers.length > 0) {\n      workers.forEach(object => {\n        const cloud = object['cloud']\n        const rp = object['requestsProcessed'];\n        //console.log(`${cloud}: ${rp}`);\n        title += rp;\n        data.push({ x: cloud, y: rp })\n        legendData.push({ name: `${cloud}: ${rp}` });\n      });\n      const chartData = { data, legendData, title }\n      //console.log(\"Rows\", JSON.stringify(chartData))\n      return chartData;\n    }\n\n    return { data: [], legendData: [], title };\n  }\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      axios.get(process.env.REACT_APP_API_WORKER_URL)\n        .then(function (response) {\n          if (response.status === 200) {\n            if (response.data) {\n              setWorkers(response.data);\n            } else {\n              console.log(\"No worker data data in response\");\n            }\n          }\n        })\n        .catch(function (error) {\n          console.log(\"Error getting worker data\", error);\n        });\n\n    }, 1000);\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n\n  return (\n    <React.Fragment>\n      <CloudMessagesChart workerData={chartData()} />\n    </React.Fragment>\n  );\n}\n\nexport default MessageWorkers;","import React from 'react';\nimport { Divider, Flex, FlexItem, Title, TitleSizes } from '@patternfly/react-core';\n\n//Application \nimport './App.css';\nimport MessageRequest from './components/MessageRequest'\nimport MessageResponse from './components/MessageResponse'\nimport MessageWorkers from './components/MessageWorkers'\n\nconst App = () => {\n\n  return (\n    <React.Fragment>\n      <Title headingLevel=\"h1\" size={TitleSizes['4xl']}>\n        Hybrid Cloud Demo\n      </Title>\n      <Divider />\n      <div id=\"-body-content\">\n        <MessageRequest />\n      </div>\n      <Divider />\n      <Flex spaceItems={{ modifier: 'spaceItemsXl' }}>\n        <FlexItem flex={{ default: 'flex_2' }}>\n          <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>\n            Responses\n          </Title>\n          <MessageResponse />\n        </FlexItem>\n        <Divider isVertical />\n        <FlexItem>\n          <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>\n            Messages\n          </Title>\n          <MessageWorkers />\n        </FlexItem>\n      </Flex>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport '@patternfly/react-core/dist/styles/base.css';\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}